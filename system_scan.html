<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>System Scan â€” Demo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg: #000;
      --fg: #00ff00;
      --muted: #4caf50;
      --panel-bg: #071010;
      --mono: "Courier New", Courier, monospace;
    }

    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family:var(--mono);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .container{
      max-width:900px;
      margin:28px auto;
      padding:24px;
    }

    header{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:12px;
    }

    h1{
      font-size:20px;
      margin:0;
      color:var(--fg);
    }

    .controls{
      margin-left:auto;
      display:flex;
      gap:8px;
      align-items:center;
    }

    button, input[type="checkbox"]{
      background:transparent;
      border:1px solid rgba(0,255,0,0.12);
      color:var(--fg);
      padding:8px 10px;
      cursor:pointer;
      font-family:var(--mono);
      font-size:13px;
      border-radius:6px;
    }

    button:focus{ outline:2px solid rgba(0,255,0,0.15); }

    #terminal {
      background: linear-gradient(180deg, rgba(0,20,0,0.35), rgba(0,0,0,0.65));
      border:1px solid rgba(0,255,0,0.08);
      padding:18px;
      min-height:220px;
      white-space:pre-wrap;
      font-size:16px;
      line-height:1.45;
      border-radius:8px;
      box-shadow: 0 8px 30px rgba(0,255,0,0.03);
    }

    .cursor {
      display:inline-block;
      width:10px;
      height:18px;
      vertical-align:middle;
      margin-left:6px;
      background:var(--fg);
      animation:blink 1s steps(2) infinite;
    }

    @keyframes blink {
      50% { opacity:0; }
    }

    .muted { color: var(--muted); font-size:13px; }

    .status-row { display:flex; gap:10px; align-items:center; margin-top:10px; }

    #videoPreview{
      margin-top:12px;
      width:240px;
      height:180px;
      background:#000;
      border:1px solid rgba(0,255,0,0.08);
      border-radius:6px;
      object-fit:cover;
      display:none;
    }

    .disclaimer{
      margin-top:10px;
      font-size:13px;
      color:rgba(0,255,0,0.6);
    }

    footer{
      margin-top:14px;
      font-size:13px;
      color:rgba(0,255,0,0.5);
    }

    @media (max-width:600px){
      .container{ padding:12px; }
      #terminal{ font-size:15px; min-height:200px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>System Scan â€” Interactive Demo</h1>

      <div class="controls" aria-hidden="false">
        <label class="muted" for="prankToggle">Prank mode</label>
        <input id="prankToggle" type="checkbox" aria-label="Toggle prank mode" />
        <button id="startBtn" type="button">Start</button>
        <button id="clearBtn" type="button">Clear</button>
      </div>
    </header>

    <main>
      <!-- Terminal-like readable region. Use role=log and aria-live for assistive tech. -->
      <div id="terminal" role="log" aria-live="polite" tabindex="0">
Initializing demo...
<span class="cursor" aria-hidden="true"></span>
      </div>

      <div class="status-row">
        <button id="cameraBtn" type="button">Request Camera (optional)</button>
        <button id="stopCameraBtn" type="button" hidden>Stop Camera</button>
        <div class="muted">Camera will only be enabled after you click and grant permission.</div>
      </div>

      <video id="videoPreview" autoplay playsinline muted></video>

      <p class="disclaimer">
        This page is a harmless demo. It does not access your camera unless you explicitly click "Request Camera".
        If prank mode is enabled, the sequence will finish with a clearly labeled prank message. No data is sent anywhere.
      </p>

      <footer>
        Tip: Use the Start button to run the scripted output. Accessibility: the terminal uses ARIA live updates.
      </footer>
    </main>
  </div>

  <script>
    // Configurable sequence lines for demo and prank modes.
    const demoLines = [
      "Simulating device scan...",
      "Checking system integrity...",
      "Verifying connected modules...",
      "Running quick diagnostics...",
      "No issues detected.",
      "Preparing summary...",
      "",
      "This was a safe demo. No camera access occurred."
    ];

    const prankLines = [
      "Connecting to device...",
      "Requesting camera permissions (simulated)...",
      "Accessing front camera module (simulated)...",
      "Scanning face (simulated)...",
      "Detecting identity (simulated)...",
      "Cross-checking face in database...",
      "WARNING: Unusual activity detected! (simulated)",
      "Tracing approximate location (simulated)...",
      "Capturing image (simulated)...",
      "Uploading to server... (simulated)",
      "ERROR: Unauthorized user detected! (simulated)",
      "Preparing report... (simulated)",
      "",
      "ðŸ¤£ GOTCHA! THIS WAS A PRANK â€” IT WAS SIMULATED. ðŸ˜†",
      "No camera was turned on unless you explicitly authorized it."
    ];

    const terminal = document.getElementById('terminal');
    const startBtn = document.getElementById('startBtn');
    const clearBtn = document.getElementById('clearBtn');
    const prankToggle = document.getElementById('prankToggle');
    const cameraBtn = document.getElementById('cameraBtn');
    const stopCameraBtn = document.getElementById('stopCameraBtn');
    const videoPreview = document.getElementById('videoPreview');

    let stream = null;
    let running = false;

    // Utility to append a line to terminal and keep focus for screen readers.
    function appendLine(text) {
      terminal.innerText = terminal.innerText.replace(/\u2588$/, '').trimEnd() + "\n" + text;
      // add a block cursor symbol at the end for visual cue
      terminal.innerText += "\n\u2588";
      terminal.scrollTop = terminal.scrollHeight;
      terminal.focus();
    }

    function clearTerminal() {
      terminal.innerText = "Demo cleared.\n\u2588";
    }

    // Show lines sequentially with a small delay.
    async function runSequence(lines, delay = 700) {
      if (running) return;
      running = true;
      clearTerminal();
      for (let i = 0; i < lines.length; i++) {
        appendLine(lines[i]);
        // eslint-disable-next-line no-await-in-loop
        await new Promise(res => setTimeout(res, delay));
      }
      appendLine("\nPress Start to run again. Have fun! ðŸ˜Ž");
      running = false;
    }

    startBtn.addEventListener('click', () => {
      const lines = prankToggle.checked ? prankLines : demoLines;
      runSequence(lines);
    });

    clearBtn.addEventListener('click', () => {
      clearTerminal();
    });

    // Camera handling: only starts when user clicks and grants permission.
    cameraBtn.addEventListener('click', async () => {
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        alert('Camera API not supported in this browser.');
        return;
      }

      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: false });
        videoPreview.srcObject = stream;
        videoPreview.style.display = "block";
        stopCameraBtn.hidden = false;
        cameraBtn.hidden = true;
        appendLine("Camera enabled: video stream active (you granted permission).");
      } catch (err) {
        console.error('getUserMedia error', err);
        appendLine("Camera access denied or unavailable.");
      }
    });

    stopCameraBtn.addEventListener('click', () => {
      if (stream) {
        stream.getTracks().forEach(t => t.stop());
        stream = null;
      }
      videoPreview.srcObject = null;
      videoPreview.style.display = "none";
      stopCameraBtn.hidden = true;
      cameraBtn.hidden = false;
      appendLine("Camera stopped.");
    });

    // Initialize terminal cursor and instructions.
    (function init() {
      terminal.innerText = "Ready. Click Start to begin the demo.\n\u2588";
    }());
  </script>
</body>
</html>